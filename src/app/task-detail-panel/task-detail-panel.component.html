<div class="task-detail-panel-wrapper">
  <!-- Use Reactive Form (Model Driven) -->
  <form [formGroup]="formModel">
    <div>
      <select (change)="handleDropdownChange()" formControlName="category">
        <option disabled selected value> -- select an option -- </option>
        <option *ngFor="let category of categories" [value]="category">{{ category }}</option>
        <option>Add a new category</option>
      </select>

      <div *ngIf="showCategoryInput">
        Category: <input formControlName="category">
      </div>
    </div>

    <div formArrayName="tasks">
      <!-- _tasksFormArray is getter defined in component -->
      <div *ngFor="let task of _tasksFormArray.controls; let i = index" [formGroupName]="i">
        Task: <input formControlName="task">
      </div>
    </div>
    <button (click)="addTaskRow()">Add Task Row</button>
  </form>

  <div class="save-cancel-container">
    <div class="primary-button button" (click)="saveTask()">Save</div>
    <div class="secondary-button button" (click)="cancelAddTask()">Cancel</div>
  </div>
</div>
<pre>{{ formModel.value | json }}</pre>
